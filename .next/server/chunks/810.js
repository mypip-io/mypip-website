"use strict";exports.id=810,exports.ids=[810],exports.modules={16810:(a,b,c)=>{c.r(b),c.d(b,{encodeIntoResult:()=>l,stegaEncodeSourceMap:()=>s,stegaEncodeSourceMap$1:()=>t});var d=c(39856);let e=/_key\s*==\s*['"](.*)['"]/;function f(a){if(!Array.isArray(a))throw Error("Path is not an array");return a.reduce((a,b,c)=>{let d=typeof b;if("number"===d)return`${a}[${b}]`;if("string"===d)return`${a}${0===c?"":"."}${b}`;if(("string"==typeof b?e.test(b.trim()):"object"==typeof b&&"_key"in b)&&b._key)return`${a}[_key=="${b._key}"]`;if(Array.isArray(b)){let[c,d]=b;return`${a}[${c}:${d}]`}throw Error(`Unsupported path segment \`${JSON.stringify(b)}\``)},"")}let g={"\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","'":"\\'","\\":"\\\\"},h={"\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	","\\'":"'","\\\\":"\\"};function i(a){let b,c=[],d=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;for(;null!==(b=d.exec(a));){if(void 0!==b[1]){let a=b[1].replace(/\\(\\|f|n|r|t|')/g,a=>h[a]);c.push(a);continue}if(void 0!==b[2]){c.push(parseInt(b[2],10));continue}if(void 0!==b[3]){let a=b[3].replace(/\\(\\')/g,a=>h[a]);c.push({_key:a,_index:-1});continue}}return c}function j(a){return a.map(a=>{if("string"==typeof a||"number"==typeof a)return a;if(""!==a._key)return{_key:a._key};if(-1!==a._index)return a._index;throw Error(`invalid segment:${JSON.stringify(a)}`)})}function k(a){return"object"==typeof a&&null!==a}function l(a,b,c){return function a(b,c,d=[]){if(null!==b&&Array.isArray(b))return b.map((b,e)=>{if(k(b)){let f=b._key;if("string"==typeof f)return a(b,c,d.concat({_key:f,_index:e}))}return a(b,c,d.concat(e))});if(k(b)){if("block"===b._type||"span"===b._type){let e={...b};return"block"===b._type?e.children=a(b.children,c,d.concat("children")):"span"===b._type&&(e.text=a(b.text,c,d.concat("text"))),e}return Object.fromEntries(Object.entries(b).map(([b,e])=>[b,a(e,c,d.concat(b))]))}return c(b,d)}(a,(a,d)=>{if("string"!=typeof a)return a;let e=function(a,b){var c;if(!b?.mappings)return;let d=(c=a.map(a=>{if("string"==typeof a||"number"==typeof a)return a;if(-1!==a._index)return a._index;throw Error(`invalid segment:${JSON.stringify(a)}`)}),`$${c.map(a=>"string"==typeof a?`['${a.replace(/[\f\n\r\t'\\]/g,a=>g[a])}']`:"number"==typeof a?`[${a}]`:""!==a._key?`[?(@._key=='${a._key.replace(/['\\]/g,a=>g[a])}')]`:`[${a._index}]`).join("")}`);if(void 0!==b.mappings[d])return{mapping:b.mappings[d],matchedPath:d,pathSuffix:""};let e=Object.entries(b.mappings).filter(([a])=>d.startsWith(a)).sort(([a],[b])=>b.length-a.length);if(0==e.length)return;let[f,h]=e[0],i=d.substring(f.length);return{mapping:h,matchedPath:f,pathSuffix:i}}(d,b);if(!e)return a;let{mapping:f,matchedPath:h}=e;if("value"!==f.type||"documentValue"!==f.source.type)return a;let j=b.documents[f.source.document],k=b.paths[f.source.path],l=i(h);return c({sourcePath:i(k).concat(d.slice(l.length)),sourceDocument:j,resultPath:d,value:a})})}let m="drafts.";function n(a){return a.startsWith(m)}function o(a){return a.startsWith("versions.")}let p=({sourcePath:a,resultPath:b,value:c})=>{if(function(a){return!!/^\d{4}-\d{2}-\d{2}/.test(a)&&!!Date.parse(a)}(c)||function(a){try{new URL(a,a.startsWith("/")?"https://acme.com":void 0)}catch{return!1}return!0}(c))return!1;let d=a.at(-1);return!("slug"===a.at(-2)&&"current"===d||"string"==typeof d&&(d.startsWith("_")||d.endsWith("Id"))||a.some(a=>"meta"===a||"metadata"===a||"openGraph"===a||"seo"===a)||r(a)||r(b)||"string"==typeof d&&q.has(d))},q=new Set(["color","colour","currency","email","format","gid","hex","href","hsl","hsla","icon","id","index","key","language","layout","link","linkAction","locale","lqip","page","path","ref","rgb","rgba","route","secret","slug","status","tag","template","theme","type","textTheme","unit","url","username","variant","website"]);function r(a){return a.some(a=>"string"==typeof a&&null!==a.match(/type/i))}function s(a,b,c){let{filter:g,logger:h,enabled:i}=c;if(!i){let d="config.enabled must be true, don't call this function otherwise";throw h?.error?.(`[@sanity/client]: ${d}`,{result:a,resultSourceMap:b,config:c}),TypeError(d)}if(!b)return h?.error?.("[@sanity/client]: Missing Content Source Map from response body",{result:a,resultSourceMap:b,config:c}),a;if(!c.studioUrl){let d="config.studioUrl must be defined";throw h?.error?.(`[@sanity/client]: ${d}`,{result:a,resultSourceMap:b,config:c}),TypeError(d)}let k=[],q=[],r=l(a,b,({sourcePath:a,sourceDocument:b,resultPath:e,value:i})=>{var l;let r;if(("function"==typeof g?g({sourcePath:a,resultPath:e,filterDefault:p,sourceDocument:b,value:i}):p({sourcePath:a,resultPath:e,value:i}))===!1)return h&&q.push({path:f(j(a)),value:`${i.slice(0,20)}${i.length>20?"...":""}`,length:i.length}),i;h&&k.push({path:f(j(a)),value:`${i.slice(0,20)}${i.length>20?"...":""}`,length:i.length});let{baseUrl:s,workspace:t,tool:u}=("/"!==(r="string"==typeof(l="function"==typeof c.studioUrl?c.studioUrl(b):c.studioUrl)?l:l.baseUrl)&&(r=r.replace(/\/$/,"")),"string"==typeof l?{baseUrl:r}:{...l,baseUrl:r});if(!s)return i;let{_id:v,_type:w,_projectId:x,_dataset:y}=b;return(0,d.C)(i,{origin:"sanity.io",href:function(a){let{baseUrl:b,workspace:c="default",tool:d="default",id:e,type:g,path:h,projectId:i,dataset:k}=a;if(!b)throw Error("baseUrl is required");if(!h)throw Error("path is required");if(!e)throw Error("id is required");if("/"!==b&&b.endsWith("/"))throw Error("baseUrl must not end with a slash");let l="default"===c?void 0:c,p="default"===d?void 0:d,q=o(e)?e.split(".").slice(2).join("."):n(e)?e.slice(m.length):e,r=Array.isArray(h)?f(j(h)):h,s=new URLSearchParams({baseUrl:b,id:q,type:g,path:r});if(l&&s.set("workspace",l),p&&s.set("tool",p),i&&s.set("projectId",i),k&&s.set("dataset",k),n(e)||o(e)){if(o(e)){let a=function(a){if(!o(a))return;let[b,c,...d]=a.split(".");return c}(e);s.set("perspective",a)}}else s.set("perspective","published");let t=["/"===b?"":b];l&&t.push(l);let u=["mode=presentation",`id=${q}`,`type=${g}`,`path=${encodeURIComponent(r)}`];return p&&u.push(`tool=${p}`),t.push("intent","edit",`${u.join(";")}?${s}`),t.join("/")}({baseUrl:s,workspace:t,tool:u,id:v,type:w,path:a,...!c.omitCrossDatasetReferenceData&&{dataset:y,projectId:x}})},!1)});if(h){let a=q.length,b=k.length;if((a||b)&&((h?.groupCollapsed||h.log)?.("[@sanity/client]: Encoding source map into result"),h.log?.(`[@sanity/client]: Paths encoded: ${k.length}, skipped: ${q.length}`)),k.length>0&&(h?.log?.("[@sanity/client]: Table of encoded paths"),(h?.table||h.log)?.(k)),q.length>0){let a=new Set;for(let{path:b}of q)a.add(b.replace(e,"0").replace(/\[\d+\]/g,"[]"));h?.log?.("[@sanity/client]: List of skipped paths",[...a.values()])}(a||b)&&h?.groupEnd?.()}return r}var t=Object.freeze({__proto__:null,stegaEncodeSourceMap:s})}};